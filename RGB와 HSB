/*
// RGB Cube와 HSB Cylinder 속에서 Hue(색상), Saturation(채도), Brightness(밝기)

// 왜 개발자에게 컬러 스펙을 HSB로 전달하면 안 되는지 알 수 있었다

// 빛의 삼원색, 색의 삼원색
빛의 삼원색은 Red, Green, Blue 즉 지금 이야기하려는 RGB이고 
색의 삼원색은 Cyan, Magenta, Yellow로 주로 인쇄 시 이야기하는 잉크의 색인 CMY이다.

그러므로 8 bits 체계에서 왜 검은색이 (0, 0, 0)이고 흰색이 (255, 255, 255)인지 알 수 있다. 
삼원색이 하나도 없는 상태가 검은색이고, 삼원색이 모두 최대로 있는 상태가 흰색이기 때문이다.

// HSB의 탄생
RGB(23, 185, 79)는 무슨 색일까?
무슨 색인지 유추해내기 어렵다. 
이렇게 RGB 값은 직관적으로 이해하기 어려우므로 HSB라는 호환체계가 1970년경에 고안되었다. 
RGB(23, 185, 79)를 HSB로 변환해 보면 HSB(141, 88, 73)이다. 
바로 명 채도가 약간 낮은 초록색이라는 것을 알 수 있다.
HSB는 RGB를 호환하기 위해 만들어졌기 때문에 직관적이지만 정확하지는 않다. 
같은 값이라도 서로 다르게 변환하는 현상을 방지하고 싶다면 HSB보다는 RGB를 기준으로 작업하는 것이 좋다.

// RGB Cube에서 HSB Cylinder로
그럼 이제 본격적으로 RGB가 어떻게 HSB로 환원되며 어떤 과정에서 색상 정보가 변질되는지 알아보자.
RGB는 한 변의 길이가 256인 정사각형으로 그릴 수 있다. 이를 RGB Cube라고 한다.
이 RGB cube를 HSB Cylinder로 만들기 위해선 
먼저 이 정사각형의 한 꼭짓점인 검은색(RGB(0, 0, 0))과 흰색(RGB(255, 255, 255))을 잇는 축이 수평에 직각이 되도록 돌린다.
이렇게 돌린 RGB Cube를 정면에서 바라보면 각 꼭짓점, Red, Green, Blue와 Cyan, Magenta, Yellow의 높이가 다르다.
이 높이를 강제로 중앙값으로 통일한다.
이로써 C, M, Y의 위치가 흰색에서 검은색에 더 가까워졌고, R, G, B의 위치는 검은색에서 흰색에 더 가까워졌다.
이렇게 변형된 육각 마름모꼴을 원통 형태로 만들기 위해 하단의 검은색 꼭짓점을 육각형 형태로 늘인다.
이번에는 상단의 흰색 꼭짓점을 아래로 눌러 육각 기둥 형태를 만든다.
이렇게 만들어진 육각 기둥의 각 면을 둥글게 만들어서 높이와 반지름이 같은 원기둥으로 만든다.
tada! RGB Cube가 HSB Cylinder로 변했다.
이 HSB Cylinder를 잘라 단면을 보면 H(hue)를 기준으로 한 color picker의 익숙한 모습을 볼 수 있다.
이렇게 RGB Cube를 HSB Cylinder로 변형하면서 색공간이 다음과 같이 달라졌다.

// RGB Cube 속에서의 Hue, Brightness, Saturation
그렇다면 색 간의 관계를 더 정확히 이해하기 위해 다소 낯선 RGB Cube를 더 뜯어보기로 한다.

// Hue 색상
RGB Cube에서나 HSB Cylinder에서나 Hue는 검은색과 흰색을 잇는 축을 기준으로 하는 각도로 표현된다. 
하지만 HSB Cylinder에서는 같은 Hue 값을 가지는 색상이 사각형의 면으로 표현되는 데 반해 
RGB Cube에서는 각도마다 변의 길이가 다른 삼각형이라는 점이 다르다.

// Brightness 밝기
앞서 빛의 삼원색에 대해 알아보았다.
빛은 가산 혼합이며 각 Red, Green, Blue 빛의 정도가 많을 수록(밝을수록) 흰색에 가까워진다.
그러므로 RGB(a, b, c)라 할 때 (a + b + c)/3이 그 색의 brightness다.
따라서 검은색과 흰색을 잇는 축에 직교하는 평면 위에 있는 점들, 즉 (a + b + c)/3의 값이 같은 색들은 그 밝기가 서로 같다.4

// Saturation 채도
RGB Cube의 흰 꼭짓점과 검은 꼭짓점을 잇는 중심축은 당연하게도 모두 회색으로 이루어져 있다.
Hue 이미지를 보면 이 축에 가까워져 올수록 채도가 낮아짐을 알 수 있다. 
즉 채도는 RGB Cube의 검은색 점에 정점을 두며, 중심축을 공유하는 원뿔형이다.
그러므로 C, M, Y는 R, G, B보다 채도가 낮은 색임을 알 수 있다.


// 결론
지금까지 HSB와 RGB의 구성 원리를 알아보았다. 두 색공간의 차이로부터 많은 관계를 유추할 수 있다. 
디자인하는 데 필요한 간단한 상식을 위주로 돌아보며 포스팅을 마치려 한다.

// HSB 컬러와 RGB 컬러는 1:1 대응하지 않는다.
HSB컬러는 RGB컬러의 약 21%밖에 표현하지 못한다. 
그래서 Color picker 상에서 HSB 값을 가감하며 조정하면 원하는 색을 미세하게 뽑을 수 없으며, 그래픽 툴 간에 RGB 값이 달라지기도 한다. 
이런 이유로 큰 틀에서는 HSB로 색을 뽑되 최종 색은 RGB 값으로 기록, 공유하는 것이 정확하다

보다시피 HSB 단면은 RGB 단면을 직관적으로 인지하기 쉽도록 변형한 것이다.
그 과정에서 흰색(255, 255, 255)과 원색 (255, 0, 0)을 잇는 변의 길이가 줄어들었으며(색 밀도가 높아졌으며) 
한 점으로 표현되는 검은색(0, 0, 0)이 밑변이 되었다.
따라서 HSB 단면의 밑변과 흰점을 잇는 삼각형 영역이 (255, 255, 255), (255, 0, 0), (0, 0, 0)을 지나는 직각 삼각형보다 색 밀도가 낮다. 
또한 세로축(Saturation)보다 가로축(Brightness)의 밀도가 높다.

// HSB의 Saturation과 Brightness는 상댓값이다.
Saturation 값과 Brightness 값이 같더라도 Hue가 다르다면 두 색의 명도와 채도는 다를 수 있다. 
HSB 상에서 S, B는 같은 Hue 값 내의 상대 수치일 뿐 물리적, 인지적 절댓값을 의미하지 않는다. 
R, G, B가 C, M, Y보다 채도가 높으며 명도가 낮은 색상임을 유의한다.

//
1. 
RGB와 HSB는 모두 실수 체계를 가진다. 
하지만 일반적인 디자인 작업에서 이 둘을 소수점까지 다루지는 않고, 
인간의 눈이 인지할 수 있는 색상의 영역이 정수로만 연산한 RGB 색 공간 안에 포함되기 때문에 
이 포스트에서는 정수 체계에서의 색들만 다루었다.

2. 
HSV의 V는 value의 이니셜이며, HSB의 brightness와 같은 의미이다. 
일반적으로 HSV라는 용어를 더 자주 쓰지만, 
어도비 그래픽 툴을 사용하는 디자이너에게는 HSB가 익숙한 표현이므로 포스팅에서는 HSB라는 단어를 사용했다. 

3. 
Hue를 한글로 “색상”이라고 번역하는데, 
이는 H, S, B를 모두 포함하는 Color “색”이라는 개념과 종종 혼란을 빚으므로 주의하도록 한다. 

4. 
여기서 색의 명도가 같다는 의미는 물리적인 차원에서 한 설명이다. 
인간의 눈이 인지하는 밝기와는 차이가 있으며 이는 Luminance라고 한다.
Lab 색공간에서 L이 바로 Luminance를 뜻한다. 


// 참고: https://yeun.github.io/2016/03/21/rgb-and-hsb.html#fn:hue

*/
